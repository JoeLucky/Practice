<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <pre>
    function strLength(s, bUnicode255For1) {
        if (bUnicode255For1) {
            return s.length;
        }
        var re = 0;
        for (var i = 0; i < s.length; ++i) {
            re += s.charCodeAt(i) > 255 ? 2 : 1;
        }
        return re;
    }
    //测试
    var testStr = '0123456789哈哈';
    console.log(strLength(testStr, false));  //14
    </pre>
</body>
<script>
    function strLength(s, bUnicode255For1) {
        if (bUnicode255For1) {
            return s.length;
        }
        var re = 0;
        for (var i = 0; i < s.length; ++i) {
            re += s.charCodeAt(i) > 255 ? 2 : 1;
        }
        return re;
    }
    //测试
    var testStr = '0123456789哈哈';
    console.log(strLength(testStr, false));  //14
</script>
</html>